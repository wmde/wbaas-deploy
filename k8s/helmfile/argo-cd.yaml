
repositories:
  - name: argo-cd
    url: https://argoproj.github.io/argo-helm

templates:
  default: &default_release
    missingFileHandler: Error
    values:
      - env/production/{{`{{ .Release.Name }}`}}.values.yaml.gotmpl
      - env/{{`{{ .Environment.Name }}`}}/{{`{{ .Release.Name }}`}}.values.yaml.gotmpl

releases:
  - name: argo-cd-base
    namespace: argocd
    chart: argo-cd/argo-cd
    version: '5.53.14'
    installed: {{ eq .Environment.Name "local" | toYaml }}
    <<: *default_release

  - name: app-of-apps
    namespace: argocd
    chart: ../../charts/argocd-config/
